class PixobeAffiliateAdmin{constructor(t){this.container=t,this.container&&this.init()}init(){const t=this.container.querySelector("#pixobe-affiliate-form");if(!t)throw new Error("No form configured");t.addEventListener("input",this.formInputListener),this.form=t}formInputListener=t=>{const{dataset:e}=t.target,n=e.target;if(t.target.closest(".blurred"))return;const r=this.container.querySelector(`[data-pa-target-id=${n}`);r?this.updateChanges(t,r):console.warn("No datatarget found to udpate the changes ::"+n)};updateChanges(t,e){const n=t.target.value,{targetAttr:r,targetProp:i}=t.target.dataset;r?"style"===r?e.style[i]=n:e.setAttribute(r,n):e.innerHTML=t.target.value}onStyleChange=t=>{const e=this.form;e&&(document.getElementById("pixobe-formaction").value="style-change",e.submit())};add(t){const e=t.target,n=e.dataset,r=n.parent;if(!r)throw new Error("Please define action parent");const i=this.container.querySelector(`#${r}-action`),a=i.querySelectorAll(`#${e.id}`),o=Array.from(a).indexOf(e),s=Date.now(),c=n.template+"-action";this.insertAfter(c,i,o,s);const d=n.template+"-view",l=this.container.querySelector(`[data-pa-target-id=${r}-view]`);this.insertAfter(d,l,o,s)}delete(t){const{dataset:e}=t.target,{targetAction:n,targetView:r}=e;this.findAndRemove(n),this.findAndRemoveByDataTargetId(r)}findAndRemove=t=>{const e=this.container.querySelector(`#${t}`);if(!e)throw new Error(`Unable to find element [ ${t} ] to delete.`);e.remove()};findAndRemoveByDataTargetId=t=>{const e=this.container.querySelector(`[data-pa-target-id=${t}]`);if(!e)throw new Error(`Unable to find element [ ${t} ] to delete.`);e.remove()};findIndex(t){const e=this.container.querySelectorAll(t.id);return e?Array.from(e).indexOf(t):0}insertAfter(t,e,n,r){const i=this.createTemplate(t,r);if(!e)throw new Error("Target parent view id not defined, to attach the new node");e.insertBefore(i,e.children[n].nextSibling)}createTemplate(t,e){const n=this.container.querySelector("#"+t);n||console.error("Please find template for "+t);const r=n.content.cloneNode(!0),i=r.querySelectorAll("[data-attrs]");return i&&i.forEach((t=>{const n=JSON.parse(t.dataset.attrs);Object.entries(n).forEach((([n,r])=>{t.setAttribute(n,r+"-"+e)}))})),r}}var PAAdmin={};function onPixobeListFilter(){const t=document.getElementById("affiliate-links-table");if(t){const n=Object.fromEntries(new FormData(t).entries()).filterby,r=new URL(window.location.href);var e=r.searchParams;""!==n?e.set("filterby",n):e.delete("filterby"),r.search=e.toString(),t.action=r.toString()}}document.addEventListener("DOMContentLoaded",(function(){PAAdmin=new PixobeAffiliateAdmin(document.getElementById("pixobe-affiliate-admin"))}));
